import{A as s}from"./main2.js";async function l(n){n.preventDefault();const e=document.querySelector('input[type="text"]').value,a=document.querySelector('input[type="password"]').value;try{const t=await fetch(`${s}/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:a})}),o=await t.json();t.ok?(alert("Account created successfully!"),console.log("Registration successful")):r(o.error||"Signup failed")}catch(t){console.error(t),r("Network error. Please try again.")}}window.handleRegister=l;document.getElementById("loginForm")?.addEventListener("submit",async n=>{n.preventDefault();const e=document.getElementById("usernameInput").value,a=document.getElementById("passwordInput").value;try{const t=await fetch(`${s}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:a})});let o;try{o=await t.json()}catch{throw new Error("Invalid JSON response from server")}if(!t.ok){r(o?.error||"Login failed");return}localStorage.setItem("username",e),window.location.href="album.html"}catch(t){console.error(t),r("Something went wrong. Please try again.")}});document.addEventListener("DOMContentLoaded",()=>{const n=localStorage.getItem("username")||"Guest",e=document.getElementById("welcomeMessage");e&&(e.textContent=`Welcome, ${n}`)});function c(){localStorage.removeItem("username"),localStorage.removeItem("loggedIn"),window.location.href="login.html"}window.signOut=c;function r(n){const e=document.querySelector(".warning-box");if(e){if(!n){e.style.display="none",e.textContent="";return}e.textContent=n,e.style.color="red",e.style.display="block"}}
